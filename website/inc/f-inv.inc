<?php

// $f_distribution_10[df2][df1] gives alpha=0.10 critical value
// For df2 > 30, approximate with df2 = 40, 60, 120, etc.
$f_distribution_10 = array(
  1 => array(39.8635, 49.5000, 53.5932, 55.8330, 57.2401, 58.2044, 58.9060),
  2 => array(8.5263, 9.0000, 9.1618, 9.2434, 9.2926, 9.3255, 9.3491),
  3 => array(5.5383, 5.4624, 5.3908, 5.3426, 5.3092, 5.2847, 5.2662),
  4 => array(4.5448, 4.3246, 4.1909, 4.1072, 4.0506, 4.0097, 3.9790),
  5 => array(4.0604, 3.7797, 3.6195, 3.5202, 3.4530, 3.4045, 3.3679),
  6 => array(3.7759, 3.4633, 3.2888, 3.1808, 3.1075, 3.0546, 3.0145),
  7 => array(3.5894, 3.2574, 3.0741, 2.9605, 2.8833, 2.8274, 2.7849),
  8 => array(3.4579, 3.1131, 2.9238, 2.8064, 2.7264, 2.6683, 2.6241),
  9 => array(3.3603, 3.0065, 2.8129, 2.6927, 2.6106, 2.5509, 2.5053),
  10 => array(3.2850, 2.9245, 2.7277, 2.6053, 2.5216, 2.4606, 2.4140),
  11 => array(3.2252, 2.8595, 2.6602, 2.5362, 2.4512, 2.3891, 2.3416),
  12 => array(3.1765, 2.8068, 2.6055, 2.4801, 2.3940, 2.3310, 2.2828),
  13 => array(3.1362, 2.7632, 2.5603, 2.4337, 2.3467, 2.2830, 2.2341),
  14 => array(3.1022, 2.7265, 2.5222, 2.3947, 2.3069, 2.2426, 2.1931),
  15 => array(3.0732, 2.6952, 2.4898, 2.3614, 2.2730, 2.2081, 2.1582),
  16 => array(3.0481, 2.6682, 2.4618, 2.3327, 2.2438, 2.1783, 2.1280),
  17 => array(3.0262, 2.6446, 2.4374, 2.3077, 2.2183, 2.1524, 2.1017),
  18 => array(3.0070, 2.6239, 2.4160, 2.2858, 2.1958, 2.1296, 2.0785),
  19 => array(2.9899, 2.6056, 2.3970, 2.2663, 2.1760, 2.1094, 2.0580),
  20 => array(2.9747, 2.5893, 2.3801, 2.2489, 2.1582, 2.0913, 2.0397),
  21 => array(2.9610, 2.5746, 2.3649, 2.2333, 2.1423, 2.0751, 2.0233),
  22 => array(2.9486, 2.5613, 2.3512, 2.2193, 2.1279, 2.0605, 2.0084),
  23 => array(2.9374, 2.5493, 2.3387, 2.2065, 2.1149, 2.0472, 1.9949),
  24 => array(2.9271, 2.5383, 2.3274, 2.1949, 2.1030, 2.0351, 1.9826),
  25 => array(2.9177, 2.5283, 2.3170, 2.1842, 2.0922, 2.0241, 1.9714),
  26 => array(2.9091, 2.5191, 2.3075, 2.1745, 2.0822, 2.0139, 1.9610),
  27 => array(2.9012, 2.5106, 2.2987, 2.1655, 2.0730, 2.0045, 1.9515),
  28 => array(2.8938, 2.5028, 2.2906, 2.1571, 2.0645, 1.9959, 1.9427),
  29 => array(2.8870, 2.4955, 2.2831, 2.1494, 2.0566, 1.9878, 1.9345),
  30 => array(2.8807, 2.4887, 2.2761, 2.1422, 2.0492, 1.9803, 1.9269),
  40 => array(2.8354, 2.4404, 2.2261, 2.0909, 1.9968, 1.9269, 1.8725),
  60 => array(2.7911, 2.3933, 2.1774, 2.0410, 1.9457, 1.8747, 1.8194),
  120 => array(2.7478, 2.3473, 2.1300, 1.9923, 1.8959, 1.8238, 1.7675),
  9999999 => array(2.7055, 2.3026, 2.0838, 1.9449, 1.8473, 1.7741, 1.7167)
  );

function critical_f_value($df1, $df2) {
  global $f_distribution_10;
  if (array_key_exists($df2, $f_distribution_10)) {
    $df2_table = $f_distribution_10[$df2];
  } else {
    $keys = array_keys($f_distribution_10);
    for ($keys_i = count($keys) - 1;
         $keys[$keys_i] > $df2; --$keys_i)
      ;
    // $keys[$keys_i] should now be < $df2
    $df2_table = $f_distribution_10[$keys[$keys_i]];
  }
  return $df2_table[$df1];
}